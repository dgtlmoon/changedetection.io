// Notification Queue Dashboard Styles

.notifications-dashboard {
  h4 {
    margin-top: 0;
  }

  // Last successful notification reference box
  .last-success-box {
    background: #d4edda;
    border: 1px solid #c3e6cb;
    border-radius: 5px;
    padding: 15px;
    margin-bottom: 20px;

    h5 {
      margin-top: 0;
      color: #155724;
    }

    .details {
      font-size: 90%;

      > div {
        margin-bottom: 5px;
      }

      code {
        background: #fff;
        padding: 2px 6px;
        border-radius: 3px;
        margin-right: 5px;
        font-size: 85%;
      }
    }

    details {
      margin-top: 10px;

      summary {
        cursor: pointer;
        font-weight: bold;
        font-size: 90%;
        color: #155724;
      }

      pre {
        background: #fff;
        padding: 10px;
        border-radius: 3px;
        border: 1px solid #c3e6cb;
        margin: 10px 0 0 0;
        white-space: pre-wrap;
        word-wrap: break-word;
        font-size: 80%;
        color: #333;
        max-height: 300px;
        overflow-y: auto;
      }
    }

    .note {
      font-size: 85%;
      color: #155724;
      margin: 10px 0 0 0;
      font-style: italic;
    }
  }

  // Dashboard action buttons (outside grid)
  .dashboard-actions {
    margin-bottom: 20px;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;

    form {
      display: inline-block;
      margin: 0;
    }

    .retry-all-btn {
      background: #28a745;
      font-size: 90%;
    }

    .clear-all-btn {
      background: #6c757d;
      color: white;
      font-size: 90%;
    }
  }

  // Dashboard grid layout
  .dashboard-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 20px;

    @media (max-width: 768px) {
      grid-template-columns: 1fr !important;
    }
  }

  // Column containers
  .pending-column {
    background: #f8f9fa;
    border: 2px solid #0066cc;
    border-radius: 8px;
    padding: 20px;
  }

  .failed-column {
    background: #fff3f3;
    border: 2px solid #dc3545;
    border-radius: 8px;
    padding: 20px;
  }

  // Column headers
  .column-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 15px;

    h5 {
      margin: 0;
    }

    .count-badge {
      color: white;
      padding: 4px 12px;
      border-radius: 12px;
      font-weight: bold;
      font-size: 90%;
    }
  }

  .pending-column .column-header {
    h5 {
      color: #0066cc;
    }

    .count-badge {
      background: #0066cc;
    }
  }

  .failed-column .column-header {
    h5 {
      color: #dc3545;
    }

    .count-badge {
      &.has-failures {
        background: #dc3545;
      }

      &.no-failures {
        background: #28a745;
      }
    }
  }

  .column-description {
    font-size: 85%;
    color: #666;
    margin: 0 0 15px 0;
  }

  // Notification cards
  .notification-cards {
    max-height: 400px;
    overflow-y: auto;
  }

  .notification-card {
    background: white;
    border-radius: 5px;
    padding: 12px;
    margin-bottom: 10px;

    &.pending-card {
      border: 1px solid #dee2e6;
    }

    &.failed-card {
      border: 1px solid #dc3545;
    }
  }

  .card-header {
    display: flex;
    align-items: center;
    margin-bottom: 8px;

    .status-badge {
      color: white;
      padding: 2px 8px;
      border-radius: 3px;
      font-size: 75%;
      font-weight: bold;
      margin-right: 8px;

      &.queued {
        background: #ffc107;
      }

      &.retrying {
        background: #0066cc;
      }

      &.failed {
        background: #dc3545;
      }
    }

    a {
      font-weight: bold;
      color: #333;
    }
  }

  .notification-id {
    font-size: 75%;
    color: #999;
    margin-bottom: 5px;
    font-family: monospace;
  }

  .notification-queued-time {
    font-size: 80%;
    color: #999;
    margin-bottom: 5px;
  }

  .notification-target {
    font-size: 85%;
    color: #666;
    margin-bottom: 5px;
    word-break: break-all;
  }

  .notification-endpoints {
    font-size: 85%;
    color: #666;
    margin-bottom: 8px;

    .endpoint-item {
      margin-left: 10px;
      font-family: monospace;
      font-size: 80%;
    }
  }

  .retry-info {
    font-size: 80%;
    color: #999;
    display: flex;
    align-items: center;
    justify-content: space-between;

    form {
      display: inline;
      margin-left: 10px;
    }

    .send-now-btn {
      font-size: 75%;
      padding: 2px 6px;
      background: #17a2b8;
      color: white;
    }
  }

  .failure-time {
    font-size: 80%;
    color: #999;
    margin-bottom: 8px;
  }

  .retry-form {
    margin-top: 10px;

    button {
      font-size: 85%;
      padding: 5px 10px;
    }
  }

  // Log info box (AJAX notification details)
  .log-info-box {
    background: #f5f5f5;
    border: 1px solid #ddd;
    border-radius: 5px;
    padding: 15px;
    margin-bottom: 20px;

    .log-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      border-bottom: 1px solid #ddd;
      padding-bottom: 10px;

      h5 {
        margin: 0;
        color: #333;
      }

      .close-btn {
        background: transparent;
        border: none;
        font-size: 20px;
        cursor: pointer;
        padding: 0;
        width: 25px;
        height: 25px;
        line-height: 25px;
        text-align: center;
        color: #666;

        &:hover {
          color: #000;
        }
      }
    }

    .log-content {
      .log-meta {
        margin-bottom: 15px;
        font-size: 90%;

        > div {
          margin-bottom: 5px;
        }

        strong {
          color: #555;
        }

        .notification-id {
          font-family: monospace;
          font-size: 85%;
          color: #666;
        }

        .endpoint-item {
          margin-left: 10px;
          font-family: monospace;
          font-size: 85%;
        }
      }

      .log-body {
        h6 {
          margin: 10px 0 5px 0;
          color: #555;
        }

        pre {
          background: #fff;
          border: 1px solid #ddd;
          border-radius: 3px;
          padding: 10px;
          font-size: 80%;
          max-height: 400px;
          overflow-y: auto;
          white-space: pre-wrap;
          word-wrap: break-word;
          margin: 0;
          color: #333;
        }
      }

      .log-error {
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px solid #ddd;

        h6 {
          margin: 0 0 5px 0;
          color: #dc3545;
        }

        pre {
          background: #fff3f3;
          border: 1px solid #ffcdd2;
          border-radius: 3px;
          padding: 10px;
          font-size: 80%;
          max-height: 200px;
          overflow-y: auto;
          white-space: pre-wrap;
          word-wrap: break-word;
          margin: 0;
          color: #c62828;
        }
      }
    }
  }

  // Empty state
  .empty-state {
    background: white;
    border-radius: 5px;
    padding: 20px;
    text-align: center;

    &.pending-empty {
      border: 1px solid #dee2e6;
      color: #999;
    }

    &.failed-empty {
      border: 1px solid #28a745;
      color: #28a745;
    }
  }

  // Retry schedule table
  .retry-schedule {
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 5px;
    padding: 15px;
    margin-bottom: 20px;

    h5 {
      margin-top: 0;
    }

    p {
      font-size: 90%;
      margin-bottom: 10px;
    }

    table {
      width: 100%;
      font-size: 90%;
    }

    .note {
      font-size: 85%;
      margin-top: 10px;
      margin-bottom: 0;
      color: #666;
    }
  }

  // Dark mode support
  @media (prefers-color-scheme: dark) {
    background: #1e1e1e;
    color: #e0e0e0;

    h4, h5 {
      color: #e0e0e0;
    }

    .last-success-box {
      background: #1a3a2a;
      border-color: #2d5a3d;

      h5 {
        color: #66bb6a;
      }

      .details code {
        background: #2d2d2d;
        color: #e0e0e0;
      }

      details pre {
        background: #2d2d2d;
        border-color: #2d5a3d;
        color: #e0e0e0;
      }

      .note {
        color: #81c784;
      }
    }

    .dashboard-grid {
      .pending-column {
        background: #252525;
        border-color: #3a7bc8;
      }

      .failed-column {
        background: #2a2020;
        border-color: #c84040;
      }
    }

    .notification-card {
      background: #2d2d2d;
      border-color: #444;

      .card-header a {
        color: #90caf9;
      }

      &.failed-card {
        border-color: #c84040;
      }
    }

    .notification-id,
    .notification-queued-time,
    .notification-target,
    .notification-endpoints,
    .failure-time {
      color: #aaa;
    }

    .column-description {
      color: #999;
    }

    .empty-state {
      background: #2d2d2d;
      color: #999;

      &.failed-empty {
        border-color: #66bb6a;
        color: #66bb6a;
      }
    }

    .log-info-box {
      background: #252525;
      border-color: #444;

      .log-header {
        border-bottom-color: #444;

        h5 {
          color: #e0e0e0;
        }

        .close-btn {
          color: #aaa;

          &:hover {
            color: #fff;
          }
        }
      }

      .log-content {
        .log-meta strong {
          color: #bbb;
        }

        .log-meta .notification-id,
        .log-meta .endpoint-item {
          color: #aaa;
        }

        .log-body h6 {
          color: #bbb;
        }

        .log-body pre {
          background: #1e1e1e;
          border-color: #444;
          color: #e0e0e0;
        }

        .log-error {
          border-top-color: #444;

          h6 {
            color: #ef5350;
          }

          pre {
            background: #2a1f1f;
            border-color: #c84040;
            color: #ef9a9a;
          }
        }
      }
    }

    .retry-schedule {
      background: #252525;
      border-color: #444;
      color: #e0e0e0;

      .note {
        color: #aaa;
      }
    }
  }
}
